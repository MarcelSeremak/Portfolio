{% extends 'base.html' %}
{% load static %}

{% block title %} Homepage {% endblock %}

{% block css_files %}
<link rel="stylesheet" href="{% static 'events/homepage.css' %}">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
{% endblock %}

{% block content %}

<div class="container mt-5">
    <div class="row">
        <div class="col-lg-6">
            <div class="row">
                <!-- Card 1 -->
                <div class="col-xl-6 col-lg-6 mb-4">
                    <div class="card l-bg-cherry">
                        <div class="card-statistic-3 p-4">
                            <div class="card-icon card-icon-large"><i class="fas fa-shopping-cart"></i></div>
                            <div class="mb-4">
                                <h5 class="card-title mb-0">Payments Made</h5>
                            </div>
                            <div class="row align-items-center mb-2 d-flex">
                                <div class="col-8">
                                    <h2 class="d-flex align-items-center mb-0">
                                        1,243
                                    </h2>
                                </div>
                            </div>
                            <div class="progress mt-1" data-height="8" style="height: 8px;">
                                <div class="progress-bar l-bg-cyan" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Card 2 -->
                <div class="col-xl-6 col-lg-6 mb-4">
                    <div class="card l-bg-blue-dark">
                        <div class="card-statistic-3 p-4">
                            <div class="card-icon card-icon-large"><i class="fas fa-users"></i></div>
                            <div class="mb-4">
                                <h5 class="card-title mb-0">Customers</h5>
                            </div>
                            <div class="row align-items-center mb-2 d-flex">
                                <div class="col-8">
                                    <h2 class="d-flex align-items-center mb-0">
                                        15.07k
                                    </h2>
                                </div>
                            </div>
                            <div class="progress mt-1" data-height="8" style="height: 8px;">
                                <div class="progress-bar l-bg-green" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Card 3 -->
                <div class="col-xl-6 col-lg-6 mb-4">
                    <div class="card l-bg-green-dark">
                        <div class="card-statistic-3 p-4">
                            <div class="card-icon card-icon-large"><i class="fas fa-ticket-alt"></i></div>
                            <div class="mb-4">
                                <h5 class="card-title mb-0">Ticket Resolved</h5>
                            </div>
                            <div class="row align-items-center mb-2 d-flex">
                                <div class="col-8">
                                    <h2 class="d-flex align-items-center mb-0">
                                        578
                                    </h2>
                                </div>
                            </div>
                            <div class="progress mt-1" data-height="8" style="height: 8px;">
                                <div class="progress-bar l-bg-orange" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Card 4 -->
                <div class="col-xl-6 col-lg-6 mb-4">
                    <div class="card l-bg-orange-dark">
                        <div class="card-statistic-3 p-4">
                            <div class="card-icon card-icon-large"><i class="fas fa-dollar-sign"></i></div>
                            <div class="mb-4">
                                <h5 class="card-title mb-0">Revenue Today</h5>
                            </div>
                            <div class="row align-items-center mb-2 d-flex">
                                <div class="col-8">
                                    <h2 class="d-flex align-items-center mb-0">
                                        $11.61k
                                    </h2>
                                </div>
                            </div>
                            <div class="progress mt-1" data-height="8" style="height: 8px;">
                                <div class="progress-bar l-bg-cyan" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-5 ms-5">
            <div class="card">
                <div class="card-body">
                    <div id="chart-container">
                        <canvas id="chartjs-pie"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Your JavaScript code to create the chart -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    new Chart(document.getElementById("chartjs-pie"), {
      type: "pie",
      data: {
        labels: ["Business Meetups", "IT Conferences", "Social Meetups", "Other"],
        datasets: [{
          data: [260, 125, 54, 146],
          backgroundColor: [
            "#4cc9f0",
            "#f72585",
            "#4361ee",
            "#7209b7"
          ],
          borderColor: "transparent"
        }]
      },
      options: {
        maintainAspectRatio: false,
        cutoutPercentage: 65,
      }
    });
  });
</script>

<style>
  #chart-container {
    width: 100%;
    height: 322px;
  }
</style>

<div class="container mt-5">
    <div class="row">
        <div class="col-lg-6">
            <div class="frame">
            <section style="background-color: white; border-radius: 30px;">
  <div class="container pt-5">
    <div class="row d-flex justify-content-center">
      <div class="col-md-12 col-lg-10">
        <div class="card text-body">

          <div class="card-body p-4"  style="background-color: #2ec4b6;">
            <h4 class="mb-0" >Recent comments</h4>
            <p class="fw-light mb-4 pb-2 my-2">Latest Comments section by users</p>

            <div class="d-flex flex-start">
              <div>
                <h6 class="fw-bold mb-1" >{{ comment_first.user.username }}</h6>
                <p class="mb-0">
                    {{ comment_first.comment }}
                </p>
              </div>
            </div>
          </div>

          <hr class="my-0" />

            <hr class="my-0" style="height: 1px;" />
            {% for comment in comments %}
          <div class="card-body p-4 my-2"  style="background-color: #2ec4b6;">
            <div class="d-flex flex-start">
              <div>
                <h6 class="fw-bold mb-1">{{ comment.user.username }}</h6>
                <p class="mb-0">
                  {{ comment.comment }}
                </p>
              </div>
            </div>
          </div>

          <hr class="my-0" />
            {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>
            </div>
        </div>
        {% if user.is_authenticated %}
        <div class="col-lg-6">
<div class="comment-prompt">
    <p>Want to say something? Give us a comment.</p>
</div>

<form method="post" class="comment-form mt-5">
    {% csrf_token %}
    <div class="form-group">
        <label for="id_username">Username:</label>
        {{ user.username }}
    </div>
    <div class="form-group">
        <label for="id_comment">Comment:</label>
        {{ form.comment }}
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

        </div>
        {% else %}
        <div class="col-lg-6">
        <div class="comment-prompt">
            <p>Want to say something? Log in/Register to give us a comment.</p>
        </div>
        </div>
        {% endif %}
    </div>
</div>


{% endblock %}
